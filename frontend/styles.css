/* ═══════════════════════════════════════════════════════════════
   RepLookup — styles.css  v3.0
   Design: Refined civic-data SaaS — Linear × Stripe polish
   Fonts: Cabinet Grotesk (display) + Instrument Sans (body)
   ═══════════════════════════════════════════════════════════════ */

/* ── DESIGN TOKENS ──────────────────────────────────────────── */
:root {
  /* Surfaces */
  --bg:             #f8f7f4;
  --bg-2:           #ffffff;
  --bg-3:           #f1f0ec;
  --bg-4:           #e8e6e0;

  /* Borders */
  --border:         #e4e2db;
  --border-2:       #d0cdc5;
  --border-focus:   #3b5bdb;

  /* Text */
  --text-1:         #141210;
  --text-2:         #4a4740;
  --text-3:         #8a8680;
  --text-4:         #b0ada8;

  /* Brand accent — deep indigo, not purple */
  --accent:         #3b5bdb;
  --accent-hover:   #2f4bc4;
  --accent-subtle:  #eef1fb;

  /* Semantic */
  --green:          #0a7d5a;
  --green-bg:       #e8f5f0;
  --violet:         #5f3dc4;
  --violet-bg:      #f0ecfb;
  --amber:          #b45309;
  --amber-bg:       #fef3e2;
  --red:            #c0392b;
  --red-bg:         #fdecea;
  --sky:            #0369a1;
  --sky-bg:         #e0f2fe;

  /* Shadows — warm-tinted */
  --shadow-xs:      0 1px 2px rgba(20,18,16,.04);
  --shadow-sm:      0 1px 3px rgba(20,18,16,.06), 0 1px 2px rgba(20,18,16,.04);
  --shadow-md:      0 4px 8px rgba(20,18,16,.06), 0 2px 4px rgba(20,18,16,.04);
  --shadow-lg:      0 12px 24px rgba(20,18,16,.08), 0 4px 8px rgba(20,18,16,.04);
  --shadow-card:    0 2px 4px rgba(20,18,16,.05), 0 0 0 1px rgba(20,18,16,.06);
  --shadow-card-hover: 0 8px 20px rgba(20,18,16,.1), 0 0 0 1px rgba(20,18,16,.08);

  /* Layout */
  --max-w:          1320px;
  --panel-w:        360px;
  --nav-h:          56px;

  /* Motion */
  --ease:           cubic-bezier(0.22, 1, 0.36, 1);
  --ease-in:        cubic-bezier(0.55, 0, 1, 0.45);
  --t-fast:         140ms;
  --t-base:         220ms;
  --t-slow:         340ms;

  /* Radii */
  --r-sm:           6px;
  --r-md:           10px;
  --r-lg:           14px;
  --r-xl:           20px;
  --r-full:         999px;
}

/* ── DARK THEME ─────────────────────────────────────────────── */
[data-theme="dark"] {
  --bg:             #0d0d0f;
  --bg-2:           #131317;
  --bg-3:           #1a1a1f;
  --bg-4:           #222228;

  --border:         #22222a;
  --border-2:       #2e2e38;
  --border-focus:   #748ffc;

  --text-1:         #f0f0ee;
  --text-2:         #a8a6a2;
  --text-3:         #6a6866;
  --text-4:         #44433f;

  --accent:         #748ffc;
  --accent-hover:   #8fa4ff;
  --accent-subtle:  #1a1f38;

  --green:          #2dd4a0;
  --green-bg:       #0a2820;
  --violet:         #a78bfa;
  --violet-bg:      #1a1030;
  --amber:          #fbbf24;
  --amber-bg:       #2a1f08;
  --red:            #f87171;
  --red-bg:         #2a0e0e;
  --sky:            #38bdf8;
  --sky-bg:         #072030;

  --shadow-xs:      0 1px 2px rgba(0,0,0,.3);
  --shadow-sm:      0 1px 3px rgba(0,0,0,.4), 0 1px 2px rgba(0,0,0,.3);
  --shadow-md:      0 4px 8px rgba(0,0,0,.4), 0 2px 4px rgba(0,0,0,.3);
  --shadow-lg:      0 12px 24px rgba(0,0,0,.5), 0 4px 8px rgba(0,0,0,.3);
  --shadow-card:    0 2px 4px rgba(0,0,0,.3), 0 0 0 1px rgba(255,255,255,.05);
  --shadow-card-hover: 0 8px 20px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.08);
}

/* ── GLOBAL RESET ───────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html {
  font-size: 15px;
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
}

body {
  font-family: 'Instrument Sans', -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text-1);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  transition: background var(--t-slow) var(--ease), color var(--t-slow) var(--ease);
  overflow-x: hidden;
}

a { color: inherit; text-decoration: none; }
button { cursor: pointer; font-family: inherit; }
input { font-family: inherit; }

/* ── PROGRESS BAR ───────────────────────────────────────────── */
.progress-bar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 2px;
  z-index: 9999;
  pointer-events: none;
  background: transparent;
}

.progress-bar__fill {
  height: 100%;
  width: 0%;
  background: var(--accent);
  border-radius: 0 var(--r-full) var(--r-full) 0;
  transition: width var(--t-base) var(--ease), opacity var(--t-base) var(--ease);
  box-shadow: 0 0 8px var(--accent);
  opacity: 0;
}

.progress-bar__fill.active {
  opacity: 1;
}

/* ── TOAST ──────────────────────────────────────────────────── */
.toast-container {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  z-index: 8000;
  display: flex;
  flex-direction: column;
  gap: .5rem;
  pointer-events: none;
}

.toast {
  background: var(--bg-2);
  border: 1px solid var(--border);
  color: var(--text-1);
  padding: .75rem 1rem;
  border-radius: var(--r-md);
  font-size: .82rem;
  font-weight: 500;
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  gap: .6rem;
  max-width: 320px;
  pointer-events: all;
  animation: toastIn var(--t-slow) var(--ease) both;
  transform-origin: bottom right;
}

.toast.toast--error  { border-color: color-mix(in srgb, var(--red) 30%, transparent);  background: var(--red-bg); }
.toast.toast--success{ border-color: color-mix(in srgb, var(--green) 30%, transparent); background: var(--green-bg); }
.toast.toast--info   { border-color: color-mix(in srgb, var(--accent) 30%, transparent); }

.toast__icon { font-size: 1rem; flex-shrink: 0; }
.toast.toast--exit { animation: toastOut var(--t-base) var(--ease-in) both; }

@keyframes toastIn  { from { opacity:0; transform: scale(.9) translateY(8px); } to { opacity:1; transform:scale(1) translateY(0); } }
@keyframes toastOut { from { opacity:1; transform: scale(1); } to { opacity:0; transform:scale(.9); } }

/* ── NAVBAR ─────────────────────────────────────────────────── */
.navbar {
  position: sticky;
  top: 0;
  z-index: 1000;
  height: var(--nav-h);
  background: color-mix(in srgb, var(--bg) 80%, transparent);
  backdrop-filter: blur(12px) saturate(1.4);
  -webkit-backdrop-filter: blur(12px) saturate(1.4);
  border-bottom: 1px solid var(--border);
  transition: background var(--t-slow) var(--ease), border-color var(--t-slow) var(--ease);
}

.navbar__inner {
  max-width: var(--max-w);
  margin: 0 auto;
  height: 100%;
  padding: 0 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}

.navbar__brand {
  display: flex;
  align-items: center;
  gap: .6rem;
  user-select: none;
}

.brand__hex {
  font-size: 1.35rem;
  color: var(--accent);
  line-height: 1;
  transition: transform var(--t-base) var(--ease);
}
.navbar__brand:hover .brand__hex { transform: rotate(30deg) scale(1.1); }

.brand__name {
  font-family: 'Cabinet Grotesk', sans-serif;
  font-weight: 900;
  font-size: 1rem;
  letter-spacing: -0.04em;
  color: var(--text-1);
}

.brand__badge {
  font-size: .68rem;
  font-weight: 600;
  letter-spacing: .06em;
  text-transform: uppercase;
  color: var(--text-3);
  background: var(--bg-3);
  border: 1px solid var(--border);
  padding: .15rem .55rem;
  border-radius: var(--r-full);
}

.navbar__actions {
  display: flex;
  align-items: center;
  gap: .75rem;
}

.navbar__link {
  font-size: .8rem;
  font-weight: 500;
  color: var(--text-2);
  padding: .35rem .75rem;
  border-radius: var(--r-sm);
  transition: color var(--t-fast), background var(--t-fast);
}
.navbar__link:hover { color: var(--text-1); background: var(--bg-3); }

.divider {
  width: 1px;
  height: 18px;
  background: var(--border-2);
  border-radius: 1px;
}

/* THEME TOGGLE BUTTON */
.theme-btn {
  background: var(--bg-3);
  border: 1px solid var(--border);
  border-radius: var(--r-full);
  padding: .3rem;
  width: 56px;
  height: 30px;
  display: flex;
  align-items: center;
  transition: background var(--t-base), border-color var(--t-base);
  position: relative;
}

.theme-btn__track {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: var(--bg-2);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-sm);
  transition: transform var(--t-base) var(--ease);
  color: var(--text-2);
  position: relative;
  flex-shrink: 0;
}

[data-theme="dark"] .theme-btn { background: var(--accent-subtle); border-color: var(--accent); }
[data-theme="dark"] .theme-btn__track { transform: translateX(26px); color: var(--accent); }
.theme-btn__icon { position: absolute; transition: opacity var(--t-base), transform var(--t-base); display:flex; }
.theme-btn__icon--moon { opacity: 0; transform: rotate(90deg); }
[data-theme="dark"] .theme-btn__icon--sun  { opacity: 0; transform: rotate(-90deg); }
[data-theme="dark"] .theme-btn__icon--moon { opacity: 1; transform: rotate(0); }

/* ── HERO ───────────────────────────────────────────────────── */
.hero {
  background: var(--bg);
  padding: 4rem 1.5rem 3rem;
  text-align: center;
  position: relative;
  overflow: hidden;
  border-bottom: 1px solid var(--border);
  transition: background var(--t-slow) var(--ease), border-color var(--t-slow) var(--ease);
}

/* subtle grid texture */
.hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 48px 48px;
  opacity: .35;
  pointer-events: none;
}

/* fade vignette over grid */
.hero::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse 70% 80% at 50% 50%, transparent 40%, var(--bg) 100%);
  pointer-events: none;
}

.hero__inner {
  max-width: 680px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
}

.hero__eyebrow {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: .75rem;
  font-weight: 600;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: var(--text-3);
}

.eyebrow__dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--green);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--green) 20%, transparent);
  animation: dotPulse 2.5s infinite;
}

@keyframes dotPulse {
  0%, 100% { box-shadow: 0 0 0 3px color-mix(in srgb, var(--green) 20%, transparent); }
  50%       { box-shadow: 0 0 0 6px color-mix(in srgb, var(--green) 8%, transparent); }
}

.hero__title {
  font-family: 'Cabinet Grotesk', sans-serif;
  font-weight: 900;
  font-size: clamp(2.4rem, 5vw, 3.6rem);
  letter-spacing: -0.05em;
  line-height: 1.05;
  color: var(--text-1);
  animation: heroFadeUp .6s var(--ease) both;
}

.hero__title em {
  font-style: normal;
  color: var(--accent);
  position: relative;
}

/* underline squiggle */
.hero__title em::after {
  content: '';
  position: absolute;
  bottom: -3px;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--accent);
  border-radius: var(--r-full);
  transform-origin: left;
  animation: lineGrow .7s var(--ease) .3s both;
}

@keyframes heroFadeUp { from { opacity:0; transform:translateY(16px); } to { opacity:1; transform:translateY(0); } }
@keyframes lineGrow   { from { transform: scaleX(0); } to { transform: scaleX(1); } }

.hero__sub {
  font-size: 1rem;
  color: var(--text-2);
  line-height: 1.65;
  max-width: 44ch;
  animation: heroFadeUp .6s var(--ease) .1s both;
}

/* ── SEARCH BOX ─────────────────────────────────────────────── */
.search-wrap {
  width: 100%;
  max-width: 560px;
  position: relative;
  animation: heroFadeUp .6s var(--ease) .2s both;
}

.search-box {
  display: flex;
  align-items: center;
  background: var(--bg-2);
  border: 1px solid var(--border-2);
  border-radius: var(--r-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  transition: border-color var(--t-fast), box-shadow var(--t-fast), background var(--t-slow) var(--ease);
  gap: 0;
}

.search-box:focus-within {
  border-color: var(--border-focus);
  box-shadow: var(--shadow-md), 0 0 0 3px color-mix(in srgb, var(--accent) 14%, transparent);
}

.search-box__icon {
  padding: 0 .75rem 0 1.1rem;
  color: var(--text-3);
  display: flex;
  align-items: center;
  flex-shrink: 0;
  transition: color var(--t-fast);
}
.search-box:focus-within .search-box__icon { color: var(--accent); }

.search-box__input {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  font-size: .95rem;
  color: var(--text-1);
  padding: .9rem .5rem;
  min-width: 0;
  -webkit-appearance: none;
}
.search-box__input::placeholder { color: var(--text-4); }
.search-box__input::-webkit-search-cancel-button { display: none; }

.search-box__clear {
  background: none;
  border: none;
  padding: .4rem;
  margin-right: .3rem;
  border-radius: 50%;
  color: var(--text-3);
  display: flex;
  align-items: center;
  flex-shrink: 0;
  transition: background var(--t-fast), color var(--t-fast);
}
.search-box__clear:hover { background: var(--bg-3); color: var(--text-1); }

.search-box__sep {
  width: 1px;
  height: 24px;
  background: var(--border);
  flex-shrink: 0;
  transition: background var(--t-slow) var(--ease);
}

.search-box__locate {
  background: none;
  border: none;
  display: flex;
  align-items: center;
  gap: .4rem;
  padding: .7rem 1.1rem;
  color: var(--text-2);
  font-size: .8rem;
  font-weight: 500;
  white-space: nowrap;
  border-radius: 0 var(--r-xl) var(--r-xl) 0;
  flex-shrink: 0;
  transition: background var(--t-fast), color var(--t-fast);
}
.search-box__locate:hover { background: var(--accent-subtle); color: var(--accent); }
.search-box__locate.loading { opacity: .6; pointer-events: none; }

/* SUGGESTIONS DROPDOWN */
.suggest-dropdown {
  position: absolute;
  top: calc(100% + .5rem);
  left: 0; right: 0;
  background: var(--bg-2);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  z-index: 500;
  animation: dropdownIn var(--t-base) var(--ease);
  max-height: 360px;
  overflow-y: auto;
}

@keyframes dropdownIn {
  from { opacity:0; transform:translateY(-6px) scale(.98); }
  to   { opacity:1; transform:translateY(0) scale(1); }
}

.suggest-section { padding: .5rem 0; }
.suggest-section + .suggest-section { border-top: 1px solid var(--border); }

.suggest-section__label {
  font-size: .68rem;
  font-weight: 600;
  letter-spacing: .09em;
  text-transform: uppercase;
  color: var(--text-4);
  padding: .4rem 1rem .2rem;
}

.suggest-list { list-style: none; }

.suggest-item {
  display: flex;
  align-items: center;
  gap: .75rem;
  padding: .6rem 1rem;
  cursor: pointer;
  transition: background var(--t-fast);
  font-size: .88rem;
  color: var(--text-1);
}
.suggest-item:hover, .suggest-item[aria-selected="true"] { background: var(--bg-3); }
.suggest-item__icon { color: var(--text-3); font-size: .85rem; flex-shrink: 0; }
.suggest-item__name { font-weight: 500; }
.suggest-item__sub  { font-size: .75rem; color: var(--text-3); margin-left: auto; }
.suggest-item__remove {
  margin-left: auto;
  background: none;
  border: none;
  color: var(--text-4);
  font-size: .75rem;
  padding: .2rem .4rem;
  border-radius: var(--r-sm);
  transition: background var(--t-fast), color var(--t-fast);
  flex-shrink: 0;
}
.suggest-item__remove:hover { background: var(--red-bg); color: var(--red); }

/* "No matches" row — not clickable, muted appearance */
.suggest-item--empty {
  cursor: default;
  color: var(--text-3);
  font-style: italic;
}
.suggest-item--empty:hover { background: transparent; }
.suggest-item--empty .suggest-item__icon { opacity: .5; }

/* Locality suggestion row — slightly indented to distinguish from AC names */
.suggest-item--locality .suggest-item__icon { color: var(--accent); opacity: .6; }
.suggest-item--locality .suggest-item__sub  { color: var(--accent); opacity: .7; font-size: .72rem; }

/* Matching text highlight inside suggestion names */
.suggest-item__name mark {
  background: transparent;
  color: var(--accent);
  font-weight: 700;
}

/* Persistent toast spinner (geocoding in progress) */
.toast__spinner {
  display: inline-block;
  width: 11px;
  height: 11px;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin .7s linear infinite;
  opacity: .5;
  flex-shrink: 0;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ── HERO STATS ─────────────────────────────────────────────── */
.hero__stats {
  display: flex;
  gap: 1.5rem;
  animation: heroFadeUp .6s var(--ease) .3s both;
}

.stat-chip {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .1rem;
}

.stat-chip__num {
  font-family: 'Cabinet Grotesk', sans-serif;
  font-weight: 900;
  font-size: 1.4rem;
  letter-spacing: -0.05em;
  color: var(--text-1);
}

.stat-chip__label {
  font-size: .7rem;
  color: var(--text-3);
  font-weight: 500;
  letter-spacing: .04em;
  text-transform: uppercase;
}

/* ── WORKSPACE ──────────────────────────────────────────────── */
.workspace {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.workspace__inner {
  flex: 1;
  max-width: var(--max-w);
  margin: 0 auto;
  width: 100%;
  padding: 1.5rem 1.5rem 2.5rem;
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

/* ── VIEW TOGGLE ────────────────────────────────────────────── */
.view-toggle {
  display: flex;
  background: var(--bg-2);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  padding: .25rem;
  gap: .2rem;
  align-self: flex-start;
  box-shadow: var(--shadow-xs);
}

.view-toggle__btn {
  display: flex;
  align-items: center;
  gap: .45rem;
  padding: .4rem .9rem;
  border: none;
  border-radius: calc(var(--r-md) - 3px);
  font-size: .8rem;
  font-weight: 500;
  color: var(--text-2);
  background: transparent;
  transition: background var(--t-fast), color var(--t-fast), box-shadow var(--t-fast);
}

.view-toggle__btn.active {
  background: var(--bg);
  color: var(--text-1);
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
}

.view-toggle__btn:not(.active):hover {
  background: var(--bg-3);
  color: var(--text-1);
}

/* ── VIEW PANELS ────────────────────────────────────────────── */
.view-panel.hidden { display: none; }

/* ── MAP LAYOUT ─────────────────────────────────────────────── */
.map-layout {
  display: grid;
  grid-template-columns: 1fr var(--panel-w);
  gap: 1.25rem;
  align-items: start;
}

/* MAP WRAP */
.map-wrap {
  position: relative;
  border-radius: var(--r-lg);
  overflow: hidden;
  border: 1px solid var(--border);
  box-shadow: var(--shadow-md);
  background: var(--bg-3);
}

#map {
  height: 580px;
  width: 100%;
  cursor: crosshair;
}

.map-overlay-hint {
  position: absolute;
  bottom: 3rem;
  left: 50%;
  transform: translateX(-50%);
  background: color-mix(in srgb, var(--bg-2) 92%, transparent);
  backdrop-filter: blur(8px);
  border: 1px solid var(--border);
  border-radius: var(--r-full);
  padding: .5rem 1rem;
  font-size: .78rem;
  font-weight: 500;
  color: var(--text-2);
  display: flex;
  align-items: center;
  gap: .5rem;
  white-space: nowrap;
  box-shadow: var(--shadow-sm);
  transition: opacity var(--t-base), transform var(--t-base);
  pointer-events: none;
}

.map-hint__dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--accent);
  flex-shrink: 0;
  animation: dotPulse 2s infinite;
}

.map-overlay-hint.fade-out {
  opacity: 0;
  transform: translateX(-50%) translateY(4px);
}

.map-reset-btn {
  position: absolute;
  top: .75rem;
  right: .75rem;
  width: 32px;
  height: 32px;
  background: var(--bg-2);
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  color: var(--text-2);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-sm);
  transition: background var(--t-fast), color var(--t-fast), transform var(--t-base) var(--ease);
  z-index: 400;
}
.map-reset-btn:hover { background: var(--bg-3); color: var(--text-1); transform: rotate(-180deg); }

/* ── SIDE PANEL ─────────────────────────────────────────────── */
.side-panel {
  background: var(--bg-2);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-md);
  min-height: 400px;
  position: sticky;
  top: calc(var(--nav-h) + 1rem);
  max-height: calc(100vh - var(--nav-h) - 2rem);
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  transition: background var(--t-slow) var(--ease), border-color var(--t-slow) var(--ease);

  /* Custom scrollbar */
  scrollbar-width: thin;
  scrollbar-color: var(--border-2) transparent;
}
.side-panel::-webkit-scrollbar { width: 4px; }
.side-panel::-webkit-scrollbar-track { background: transparent; }
.side-panel::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 2px; }

/* ── PANEL STATES ───────────────────────────────────────────── */
.panel-state {
  flex: 1;
  padding: 2rem 1.25rem;
}

.panel-state--empty,
.panel-state--error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: .75rem;
  min-height: 360px;
}

.panel-state.hidden { display: none; }

.empty-art, .error-art {
  width: 96px;
  height: 96px;
  color: var(--text-3);
  margin-bottom: .5rem;
}

.empty-title, .error-title {
  font-family: 'Cabinet Grotesk', sans-serif;
  font-weight: 700;
  font-size: 1.05rem;
  color: var(--text-1);
}

.empty-desc, .error-msg {
  font-size: .84rem;
  color: var(--text-3);
  line-height: 1.6;
  max-width: 26ch;
}

.error-hint {
  font-size: .74rem;
  color: var(--text-3);
  background: var(--bg-3);
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  padding: .5rem .75rem;
  font-family: 'SF Mono', 'Fira Code', 'Courier New', monospace;
  text-align: left;
  max-width: 100%;
  word-break: break-all;
  line-height: 1.5;
  display: none; /* shown by JS when relevant */
}

.error-hint.visible { display: block; }

.retry-btn {
  display: inline-flex;
  align-items: center;
  gap: .45rem;
  margin-top: .25rem;
  padding: .55rem 1.1rem;
  background: var(--bg-3);
  border: 1px solid var(--border-2);
  border-radius: var(--r-full);
  font-size: .82rem;
  font-weight: 500;
  color: var(--text-2);
  transition: background var(--t-fast), border-color var(--t-fast), color var(--t-fast);
}
.retry-btn:hover { background: var(--accent); border-color: var(--accent); color: #fff; }

/* ── SKELETONS ──────────────────────────────────────────────── */
.panel-state--loading {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1.25rem;
}

.skeleton-card {
  background: var(--bg-3);
  border-radius: var(--r-md);
  padding: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: .6rem;
}

.skeleton-row {
  height: 10px;
  border-radius: var(--r-full);
  background: linear-gradient(90deg,
    var(--border) 25%,
    color-mix(in srgb, var(--border) 50%, var(--bg-2)) 50%,
    var(--border) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.6s infinite;
}
.sk-short  { width: 35%; height: 8px; }
.sk-long   { width: 80%; height: 14px; }
.sk-medium { width: 60%; }
.sk-chip   { width: 45%; height: 22px; border-radius: var(--r-sm); }
.sk-spacer { height: .4rem; }

@keyframes shimmer {
  to { background-position: -200% 0; }
}

/* ── RESULTS META ───────────────────────────────────────────── */
.results-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .9rem 1.25rem;
  border-bottom: 1px solid var(--border);
  font-size: .75rem;
  color: var(--text-3);
  font-variant-numeric: tabular-nums;
  gap: .5rem;
}

.results-meta__coords {
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: .72rem;
}

.results-meta__time {
  color: var(--green);
  font-weight: 600;
}

/* ── REP CARDS ──────────────────────────────────────────────── */
.cards-container {
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: .9rem;
}

.rep-card {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  overflow: hidden;
  box-shadow: var(--shadow-card);
  transition:
    box-shadow var(--t-base) var(--ease),
    border-color var(--t-base) var(--ease),
    transform var(--t-base) var(--ease);
  cursor: default;
  animation: cardIn var(--t-slow) var(--ease) both;
}

.rep-card:nth-child(2) { animation-delay: .08s; }

@keyframes cardIn {
  from { opacity:0; transform:translateY(10px) scale(.99); }
  to   { opacity:1; transform:translateY(0) scale(1); }
}

.rep-card:hover {
  box-shadow: var(--shadow-card-hover);
  border-color: var(--border-2);
  transform: translateY(-2px);
}

.rep-card.highlighted {
  border-color: var(--accent);
  box-shadow: var(--shadow-card-hover), 0 0 0 2px color-mix(in srgb, var(--accent) 18%, transparent);
}

/* CARD HEADER */
.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .7rem .9rem .5rem;
  background: var(--bg-2);
  border-bottom: 1px solid var(--border);
}

.card-header__left {
  display: flex;
  align-items: center;
  gap: .5rem;
}

.card-role-badge {
  font-family: 'Cabinet Grotesk', sans-serif;
  font-weight: 800;
  font-size: .65rem;
  letter-spacing: .1em;
  text-transform: uppercase;
  padding: .2rem .55rem;
  border-radius: var(--r-sm);
  color: #fff;
  flex-shrink: 0;
}

.card-role-badge.badge--mla { background: var(--green); }
.card-role-badge.badge--mp  { background: var(--violet); }

.card-role-sub {
  font-size: .72rem;
  color: var(--text-3);
  font-weight: 400;
}

/* CARD BODY */
.card-body {
  padding: .9rem;
  display: flex;
  flex-direction: column;
  gap: .65rem;
}

.rep-name {
  font-family: 'Cabinet Grotesk', sans-serif;
  font-weight: 800;
  font-size: 1.2rem;
  letter-spacing: -0.03em;
  line-height: 1.2;
  color: var(--text-1);
}

/* TAGS ROW */
.card-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .35rem;
}

.tag {
  display: inline-flex;
  align-items: center;
  gap: .3rem;
  padding: .22rem .6rem;
  border-radius: var(--r-full);
  font-size: .72rem;
  font-weight: 600;
  border: 1px solid transparent;
}

.tag--party-bjp    { background: #fff4e6; color: #c05621; border-color: #fbd38d; }
.tag--party-inc    { background: #e8f0fe; color: #1a56db; border-color: #93b4f7; }
.tag--party-jd     { background: var(--green-bg); color: var(--green); border-color: color-mix(in srgb, var(--green) 30%, transparent); }
.tag--party-aap    { background: var(--sky-bg); color: var(--sky); border-color: color-mix(in srgb, var(--sky) 30%, transparent); }
.tag--party-other  { background: var(--bg-3); color: var(--text-2); border-color: var(--border); }
.tag--constituency { background: var(--bg-3); color: var(--text-2); border-color: var(--border); }

[data-theme="dark"] .tag--party-bjp { background: #2d1a06; color: #f6a623; border-color: #6b3a0a; }
[data-theme="dark"] .tag--party-inc { background: #0d1a30; color: #748ffc; border-color: #1e3060; }

/* CONTACT INFO */
.card-contacts {
  display: flex;
  flex-direction: column;
  gap: .35rem;
}

.contact-row {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: .78rem;
  color: var(--text-2);
}

.contact-row__icon {
  width: 18px;
  height: 18px;
  border-radius: var(--r-sm);
  background: var(--bg-3);
  border: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-3);
  font-size: .65rem;
  flex-shrink: 0;
}

.contact-row a {
  color: var(--accent);
  transition: opacity var(--t-fast);
}
.contact-row a:hover { opacity: .75; text-decoration: underline; }

/* CARD ACTIONS */
.card-actions {
  display: flex;
  gap: .4rem;
  padding: .6rem .9rem .75rem;
  border-top: 1px solid var(--border);
  background: var(--bg-2);
  flex-wrap: wrap;
}

.card-btn {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .38rem .75rem;
  border-radius: var(--r-sm);
  font-size: .75rem;
  font-weight: 500;
  border: 1px solid var(--border);
  background: var(--bg);
  color: var(--text-2);
  transition: background var(--t-fast), border-color var(--t-fast), color var(--t-fast), transform var(--t-fast);
}

.card-btn:hover {
  background: var(--bg-3);
  border-color: var(--border-2);
  color: var(--text-1);
  transform: translateY(-1px);
}

.card-btn:active { transform: translateY(0); }

.card-btn.card-btn--copied {
  background: var(--green-bg);
  border-color: color-mix(in srgb, var(--green) 30%, transparent);
  color: var(--green);
}

/* ── LIST VIEW ──────────────────────────────────────────────── */
.list-view-inner {
  background: var(--bg-2);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  overflow: hidden;
  box-shadow: var(--shadow-md);
}

.list-header {
  padding: 1.5rem 1.75rem 1.25rem;
  border-bottom: 1px solid var(--border);
}

.list-header h2 {
  font-family: 'Cabinet Grotesk', sans-serif;
  font-weight: 800;
  font-size: 1.2rem;
  letter-spacing: -0.03em;
  color: var(--text-1);
  margin-bottom: .3rem;
}

.list-header p {
  font-size: .84rem;
  color: var(--text-3);
}

.list-table-wrap { overflow-x: auto; }

.const-table {
  width: 100%;
  border-collapse: collapse;
  font-size: .84rem;
}

.const-table th {
  padding: .75rem 1.25rem;
  text-align: left;
  font-size: .7rem;
  font-weight: 600;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: var(--text-3);
  background: var(--bg-3);
  border-bottom: 1px solid var(--border);
}

.const-table td {
  padding: .75rem 1.25rem;
  border-bottom: 1px solid var(--border);
  color: var(--text-2);
  vertical-align: middle;
}

.const-table tr:last-child td { border-bottom: none; }
.const-table tbody tr {
  transition: background var(--t-fast);
  cursor: pointer;
}
.const-table tbody tr:hover { background: var(--bg-3); }

.const-table td:first-child { color: var(--text-1); font-weight: 500; }

.table-lookup-btn {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-3);
  font-size: .72rem;
  padding: .25rem .6rem;
  border-radius: var(--r-sm);
  transition: all var(--t-fast);
  font-family: inherit;
  white-space: nowrap;
}
.table-lookup-btn:hover {
  background: var(--accent-subtle);
  border-color: var(--accent);
  color: var(--accent);
}

.table-skeleton {
  height: 12px;
  border-radius: var(--r-full);
  background: linear-gradient(90deg, var(--border) 25%, color-mix(in srgb, var(--border) 50%, var(--bg-2)) 50%, var(--border) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.6s infinite;
}

/* ── LEAFLET OVERRIDES ──────────────────────────────────────── */
.leaflet-popup-content-wrapper {
  background: var(--bg-2) !important;
  color: var(--text-1) !important;
  border: 1px solid var(--border) !important;
  box-shadow: var(--shadow-lg) !important;
  border-radius: var(--r-md) !important;
  font-family: 'Instrument Sans', sans-serif !important;
  padding: 0 !important;
}
.leaflet-popup-content {
  margin: 0 !important;
  font-size: .82rem !important;
  line-height: 1.5 !important;
}
.leaflet-popup-tip { background: var(--bg-2) !important; }
.leaflet-popup-close-button {
  color: var(--text-3) !important;
  font-size: 18px !important;
  top: 6px !important;
  right: 8px !important;
}
.leaflet-control-zoom a {
  background: var(--bg-2) !important;
  color: var(--text-2) !important;
  border-color: var(--border) !important;
  transition: background var(--t-fast), color var(--t-fast);
}
.leaflet-control-zoom a:hover {
  background: var(--bg-3) !important;
  color: var(--text-1) !important;
}
.leaflet-control-attribution {
  background: color-mix(in srgb, var(--bg-2) 85%, transparent) !important;
  color: var(--text-4) !important;
  font-size: .65rem !important;
  border-radius: var(--r-sm) 0 0 0 !important;
}
.leaflet-control-attribution a { color: var(--text-3) !important; }

/* ── FOOTER ─────────────────────────────────────────────────── */
.site-footer {
  border-top: 1px solid var(--border);
  background: var(--bg-2);
  transition: background var(--t-slow) var(--ease), border-color var(--t-slow) var(--ease);
}

.site-footer__inner {
  max-width: var(--max-w);
  margin: 0 auto;
  padding: .9rem 1.5rem;
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: .5rem;
  font-size: .72rem;
  color: var(--text-3);
}

/* ── UTILITIES ──────────────────────────────────────────────── */
.hidden { display: none !important; }

/* FOCUS RING */
:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
  border-radius: var(--r-sm);
}

/* HIGH CONTRAST MODE */
@media (prefers-contrast: high) {
  :root {
    --text-1: #000000;
    --text-2: #111111;
    --border: #555555;
  }
  [data-theme="dark"] {
    --text-1: #ffffff;
    --text-2: #eeeeee;
    --border: #aaaaaa;
  }
}

/* ── RESPONSIVE ─────────────────────────────────────────────── */
@media (max-width: 960px) {
  .map-layout {
    grid-template-columns: 1fr;
  }

  .side-panel {
    position: static;
    max-height: none;
    min-height: 0;
  }

  #map { height: 360px; }

  :root { --panel-w: 100%; }
}

@media (max-width: 640px) {
  .hero { padding: 2.5rem 1.25rem 2rem; }
  .hero__stats { gap: 1rem; }
  .stat-chip__num { font-size: 1.2rem; }
  .workspace__inner { padding: 1rem 1rem 2rem; }
  .search-box__locate span { display: none; }
  .navbar__inner { padding: 0 1rem; }
  .brand__badge { display: none; }
}

@media (max-width: 400px) {
  .hero__title { font-size: 2rem; }
  .card-actions { gap: .3rem; }
  .card-btn span { display: none; }
}