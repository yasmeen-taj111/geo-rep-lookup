<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Find your MLA and MP by location in Bangalore. Instant geo-representative lookup." />
  <title>RepLookup — Bangalore</title>
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><text y='26' font-size='28'>⬡</text></svg>" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Cabinet+Grotesk:wght@400;500;700;800;900&family=Instrument+Sans:wght@400;500;600&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <!-- TOP PROGRESS BAR -->
  <div class="progress-bar" id="progressBar" role="progressbar" aria-hidden="true">
    <div class="progress-bar__fill" id="progressFill"></div>
  </div>

  <!-- TOAST CONTAINER -->
  <div class="toast-container" id="toastContainer" aria-live="polite" aria-atomic="true"></div>

  <!-- ══════════════════════════════════════════════
       NAVBAR
  ══════════════════════════════════════════════ -->
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="navbar__inner">
      <a href="/" class="navbar__brand" aria-label="RepLookup home">
        <span class="brand__hex" aria-hidden="true">⬡</span>
        <span class="brand__name">RepLookup</span>
        <span class="brand__badge">Bangalore</span>
      </a>

      <div class="navbar__actions">
        <a href="http://localhost:8000/docs" target="_blank" rel="noopener" class="navbar__link"
          aria-label="Open API documentation">
          API <span aria-hidden="true">↗</span>
        </a>
        <div class="divider" aria-hidden="true"></div>
        <button class="theme-btn" id="themeToggle" aria-label="Switch to dark mode" title="Toggle theme">
          <span class="theme-btn__track" aria-hidden="true">
            <span class="theme-btn__icon theme-btn__icon--sun">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <circle cx="12" cy="12" r="5" />
                <line x1="12" y1="1" x2="12" y2="3" />
                <line x1="12" y1="21" x2="12" y2="23" />
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                <line x1="1" y1="12" x2="3" y2="12" />
                <line x1="21" y1="12" x2="23" y2="12" />
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
              </svg>
            </span>
            <span class="theme-btn__icon theme-btn__icon--moon">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
              </svg>
            </span>
          </span>
        </button>
      </div>
    </div>
  </nav>

  <!-- ══════════════════════════════════════════════
       HERO + SEARCH
  ══════════════════════════════════════════════ -->
  <header class="hero" role="banner">
    <div class="hero__inner">
      <div class="hero__eyebrow" aria-hidden="true">
        <span class="eyebrow__dot"></span>
        <span>37 Assembly · 4 Parliamentary Constituencies</span>
      </div>

      <h1 class="hero__title">
        Who represents<br /><em>your area?</em>
      </h1>
      <p class="hero__sub">
        Click the map or search a Bangalore neighbourhood to instantly find your MLA and MP.
      </p>

      <!-- SEARCH BOX -->
      <div class="search-wrap" role="search">
        <div class="search-box" id="searchBox">
          <span class="search-box__icon" aria-hidden="true">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
              <circle cx="11" cy="11" r="8" />
              <line x1="21" y1="21" x2="16.65" y2="16.65" />
            </svg>
          </span>
          <input type="search" id="searchInput" class="search-box__input"
            placeholder="Search constituency, area, or landmark…" autocomplete="off" spellcheck="false"
            aria-label="Search by location" aria-autocomplete="list" aria-controls="suggestList"
            aria-expanded="false" />
          <button class="search-box__clear hidden" id="clearBtn" aria-label="Clear search" tabindex="0">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
          <div class="search-box__sep" aria-hidden="true"></div>
          <button class="search-box__locate" id="locateBtn" aria-label="Use my current location"
            title="Use my location">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
              <circle cx="12" cy="12" r="10" />
              <circle cx="12" cy="12" r="3" />
              <line x1="12" y1="2" x2="12" y2="5" />
              <line x1="12" y1="19" x2="12" y2="22" />
              <line x1="2" y1="12" x2="5" y2="12" />
              <line x1="19" y1="12" x2="22" y2="12" />
            </svg>
            <span>My Location</span>
          </button>
        </div>

        <!-- SUGGESTIONS DROPDOWN -->
        <div class="suggest-dropdown hidden" id="suggestDropdown" role="listbox" aria-label="Search suggestions">
          <!-- Recent searches section -->
          <div class="suggest-section" id="recentSection">
            <div class="suggest-section__label">Recent searches</div>
            <ul class="suggest-list" id="recentList" role="group"></ul>
          </div>
          <!-- Live suggestions section -->
          <div class="suggest-section hidden" id="liveSection">
            <div class="suggest-section__label">Constituencies</div>
            <ul class="suggest-list" id="suggestList" role="listbox"></ul>
          </div>
        </div>
      </div>

      <!-- STAT CHIPS -->
      <div class="hero__stats" aria-label="Coverage statistics">
        <div class="stat-chip">
          <span class="stat-chip__num">37</span>
          <span class="stat-chip__label">Assembly seats</span>
        </div>
        <div class="stat-chip">
          <span class="stat-chip__num">4</span>
          <span class="stat-chip__label">Parliament seats</span>
        </div>
        <div class="stat-chip">
          <span class="stat-chip__num">2024</span>
          <span class="stat-chip__label">Election data</span>
        </div>
      </div>
    </div>
  </header>

  <!-- ══════════════════════════════════════════════
       MAIN WORKSPACE
  ══════════════════════════════════════════════ -->
  <main class="workspace" id="workspace">
    <div class="workspace__inner">

      <!-- VIEW TOGGLE -->
      <div class="view-toggle" role="tablist" aria-label="View mode">
        <button class="view-toggle__btn active" id="btnMapView" role="tab" aria-selected="true" data-view="map">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6" />
            <line x1="8" y1="2" x2="8" y2="18" />
            <line x1="16" y1="6" x2="16" y2="22" />
          </svg>
          Map
        </button>
        <button class="view-toggle__btn" id="btnListView" role="tab" aria-selected="false" data-view="list">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="8" y1="6" x2="21" y2="6" />
            <line x1="8" y1="12" x2="21" y2="12" />
            <line x1="8" y1="18" x2="21" y2="18" />
            <line x1="3" y1="6" x2="3.01" y2="6" />
            <line x1="3" y1="12" x2="3.01" y2="12" />
            <line x1="3" y1="18" x2="3.01" y2="18" />
          </svg>
          List
        </button>
      </div>

      <!-- ── MAP VIEW ────────────────────────────── -->
      <div class="view-panel" id="mapView" role="tabpanel" aria-labelledby="btnMapView">
        <div class="map-layout">

          <!-- MAP CONTAINER -->
          <div class="map-wrap">
            <div id="map" aria-label="Interactive Bangalore constituency map"></div>
            <div class="map-overlay-hint" id="mapHint" aria-live="polite">
              <span class="map-hint__dot" aria-hidden="true"></span>
              Click anywhere on Bangalore to look up your representatives
            </div>
            <button class="map-reset-btn" id="resetMapBtn" aria-label="Reset map view" title="Reset view">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
                <polyline points="1 4 1 10 7 10" />
                <path d="M3.51 15a9 9 0 1 0 .49-3.1" />
              </svg>
            </button>
          </div>

          <!-- RESULTS SIDE PANEL -->
          <aside class="side-panel" id="sidePanel" aria-label="Representative results">

            <!-- EMPTY STATE -->
            <div class="panel-state panel-state--empty" id="stateEmpty">
              <div class="empty-art" aria-hidden="true">
                <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="60" cy="60" r="50" stroke="currentColor" stroke-width="1.5" stroke-dasharray="8 5"
                    opacity=".2" />
                  <circle cx="60" cy="60" r="30" stroke="currentColor" stroke-width="1" opacity=".12" />
                  <path d="M60 32 C60 32 44 52 44 63 C44 72.4 51.2 80 60 80 C68.8 80 76 72.4 76 63 C76 52 60 32 60 32Z"
                    stroke="currentColor" stroke-width="1.5" fill="none" opacity=".45" />
                  <circle cx="60" cy="63" r="5" fill="currentColor" opacity=".4" />
                </svg>
              </div>
              <h2 class="empty-title">No location selected</h2>
              <p class="empty-desc">Click anywhere on the map or search above to discover your MLA and MP.</p>
            </div>

            <!-- LOADING SKELETON -->
            <div class="panel-state panel-state--loading hidden" id="stateLoading" aria-busy="true"
              aria-label="Loading results">
              <div class="skeleton-card">
                <div class="skeleton-row sk-short"></div>
                <div class="skeleton-row sk-long"></div>
                <div class="skeleton-row sk-medium"></div>
                <div class="sk-spacer"></div>
                <div class="skeleton-row sk-chip"></div>
              </div>
              <div class="skeleton-card">
                <div class="skeleton-row sk-short"></div>
                <div class="skeleton-row sk-long"></div>
                <div class="skeleton-row sk-medium"></div>
                <div class="sk-spacer"></div>
                <div class="skeleton-row sk-chip"></div>
              </div>
            </div>

            <!-- ERROR STATE -->
            <div class="panel-state panel-state--error hidden" id="stateError">
              <div class="error-art" aria-hidden="true">
                <svg viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="40" cy="40" r="30" stroke="currentColor" stroke-width="1.5" opacity=".3" />
                  <line x1="28" y1="28" x2="52" y2="52" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    opacity=".6" />
                  <line x1="52" y1="28" x2="28" y2="52" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    opacity=".6" />
                </svg>
              </div>
              <h2 class="error-title">Something went wrong</h2>
              <p class="error-msg" id="errorMsg">Unable to find representatives for this location.</p>
              <div class="error-hint" id="errorHint"></div>
              <button class="retry-btn" id="retryBtn" aria-label="Retry the last lookup">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2">
                  <polyline points="1 4 1 10 7 10" />
                  <path d="M3.51 15a9 9 0 1 0 .49-3.1" />
                </svg>
                Try again
              </button>
            </div>

            <!-- RESULTS DATA -->
            <div class="panel-state panel-state--results hidden" id="stateResults">
              <div class="results-meta" id="resultsMeta"></div>
              <!-- Cards injected by JS -->
              <div class="cards-container" id="cardsContainer"></div>
            </div>

          </aside>
        </div>
      </div>

      <!-- ── LIST VIEW ──────────────────────────── -->
      <div class="view-panel hidden" id="listView" role="tabpanel" aria-labelledby="btnListView">
        <div class="list-view-inner">
          <div class="list-header">
            <h2>All Constituencies</h2>
            <p>Complete listing of 37 Assembly and 4 Parliamentary constituencies in Bangalore.</p>
          </div>
          <div class="list-table-wrap">
            <table class="const-table" aria-label="Constituencies list">
              <thead>
                <tr>
                  <th>Assembly Constituency</th>
                  <th>Parliamentary Constituency</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="constituencyTableBody">
                <tr class="table-loading">
                  <td colspan="3">
                    <div class="table-skeleton"></div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div><!-- /workspace__inner -->
  </main>

  <!-- ══════════════════════════════════════════════
       FOOTER
  ══════════════════════════════════════════════ -->
  <footer class="site-footer">
    <div class="site-footer__inner">
      <span>Data: ECI 2008 · KA Assembly 2023 · Lok Sabha 2024</span>
      <span>Built with Leaflet.js &amp; FastAPI</span>
    </div>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="app.js"></script>
</body>

</html>